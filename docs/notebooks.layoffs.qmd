
---
format:
  html: {toc: true, toc-depth: 4, theme: cosmo, output-file: notebooks.layoffs.html}
fontsize: 0.9em
code-block-background: true
include-in-header: {text: '<link rel = "icon" href = "data:," />'}

---
<style></style><style>.printedClojure .sourceCode {
  background-color: transparent;
  border-style: none;
}
</style><style>.clay-limit-image-width .clay-image {max-width: 100%}
</style>
<script src="notebooks.layoffs_files/md-default0.js" type="text/javascript"></script><script src="notebooks.layoffs_files/md-default1.js" type="text/javascript"></script><script src="notebooks.layoffs_files/plotly2.js" type="text/javascript"></script>

::: {.sourceClojure}
```clojure
(ns notebooks.layoffs
  (:require
   [clojure.string :as str]
   [tablecloth.api :as tc]
   [tablecloth.column.api :as tcc]
   [scicloj.metamorph.ml.toydata :as data]
   [scicloj.kindly.v4.kind :as kind]))
```
:::



# Layoffs in 2024

2023 and 2024 have been really hard for tech. I have scraped the data from layoffs.fyi using [coupler.io](https://www.coupler.io/) which only limits me to the first 1,000 rows as I am using the freemium.

If you happen to know the OP of layoffs.fyi please show them this study. If we had a live integration with Airtable
this could become a live study where we track the pulse of layoffs in tech.

I am using the [scicloj](https://scicloj.github.io/) stack for this study.

Without furder ado. Here's an analysis of tech layoffs in 2024


::: {.sourceClojure}
```clojure
(defn to-kebab-case [s]
  "replaces whitespaces in a string for the character \"-\" lowercases the entire string"
  (-> s
      (str/lower-case)
      (str/replace #" " "-")))
```
:::



::: {.sourceClojure}
```clojure
(def layoffs
  (-> "./data/layoffs.csv"
      (tc/dataset {:key-fn (comp keyword to-kebab-case)})))
```
:::



::: {.sourceClojure}
```clojure
(tc/info layoffs :basic)
```
:::


::: {.clay-dataset}
./data/layoffs.csv :basic info [1 4]:

|              :name | :grouped? | :rows | :columns |
|--------------------|-----------|------:|---------:|
| ./data/layoffs.csv |     false |   999 |       12 |


:::



::: {.sourceClojure}
```clojure
(tc/info layoffs)
```
:::


::: {.clay-dataset}
./data/layoffs.csv: descriptive-stats [12 12]:

|                   :col-name |          :datatype | :n-valid | :n-missing |       :min |      :mean |         :mode |       :max | :standard-deviation |       :skew |                                                                                                             :first |                                                                                                                                                                                                                          :last |
|-----------------------------|--------------------|---------:|-----------:|------------|------------|---------------|------------|--------------------:|------------:|--------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                    :company |            :string |      999 |          0 |            |            |        Google |            |                     |             |                                                                                                         Salesforce |                                                                                                                                                                                                                      Staffbase |
|                :location-hq |            :string |      998 |          1 |            |            |   SF Bay Area |            |                     |             |                                                                                                        SF Bay Area |                                                                                                                                                                                                              Chemnitz,Non-U.S. |
|                 :#-laid-off |             :int16 |      581 |        418 |      6.000 |      286.8 |               |  1.400E+04 |      8.41413512E+02 | 10.15527750 |                                                                                                                300 |                                                                                                                                                                                                                             90 |
|                       :date | :packed-local-date |      999 |          0 | 2023-06-02 | 2023-11-21 |               | 2024-07-15 |      9.74879524E+09 |  0.25709452 |                                                                                                         2024-07-15 |                                                                                                                                                                                                                     2023-06-02 |
|                          :% |           :float64 |      580 |        419 |    0.01000 |     0.3429 |               |      1.000 |      3.52245247E-01 |  1.12776034 |                                                                                                                    |                                                                                                                                                                                                                                |
|                   :industry |            :string |      998 |          1 |            |            |       Finance |            |                     |             |                                                                                                              Sales |                                                                                                                                                                                                                          Other |
|                     :source |            :string |      998 |          1 |            |            | Internal memo |            |                     |             | https://www.bloomberg.com/news/articles/2024-07-15/salesforce-cuts-about-300-jobs-in-latest-sign-of-tech-austerity | https://www.businessinsider.de/gruenderszene/technologie/entlassungswelle-trifft-chemnitzer-software-unicorn-staffbase/?tpcc=offsite_gs_linkedin-facebook&fbclid=IwAR11HXLrgoy2GqefJu9xkrAtdqlHzdyBFXw1sYqgFmUJoacmBtcZSXNxmDw |
| :list-of-employees-laid-off |            :string |       34 |        965 |            |            |               |            |                     |             |                                                                                                                    |                                                                                                                                                                                                                                |
|                      :stage |            :string |      999 |          0 |            |            |      Post-IPO |            |                     |             |                                                                                                           Post-IPO |                                                                                                                                                                                                                       Series E |
|              :$-raised-(mm) |           :float64 |      870 |        129 |      1.000 |      820.9 |               |  2.720E+04 |      2.51616248E+03 |  7.04386358 |                                                                                                              65.00 |                                                                                                                                                                                                                          307.0 |
|                    :country |            :string |      999 |          0 |            |            | United States |            |                     |             |                                                                                                      United States |                                                                                                                                                                                                                        Germany |
|                 :date-added | :packed-local-date |      999 |          0 | 2023-01-06 | 2023-11-26 |               | 2024-07-15 |      9.81443738E+09 |  0.18584663 |                                                                                                         2024-07-15 |                                                                                                                                                                                                                     2023-06-04 |


:::



## What countries where the most affected?


::: {.sourceClojure}
```clojure
(def layoffs-by-country
  (-> layoffs
      (tc/group-by :country)
      (tc/aggregate {:total-layoffs (fn [ds]
                                      (-> ds
                                          :#-laid-off
                                          tcc/sum))})
      (tc/order-by :total-layoffs :desc)))
```
:::



::: {.sourceClojure}
```clojure
(def plotly-layoffs-by-country
  {:data [{
           :x    (:$group-name layoffs-by-country)
           :y    (:total-layoffs layoffs-by-country)
           :type :bar
           :marker {:size 4 :colorscale :Viridis}}]
   :layout {
            :xaxis {:title "Countries" :type :category}
            :yaxis {:title "People laid off" :type :log}
            :title "Layoffs by country"}})
```
:::


The top 3 countries that were the most affected by reported mass layoffs in tech were:

- United States
- India
- United Kingdom


::: {.sourceClojure}
```clojure
(tc/head layoffs-by-country 3)
```
:::


::: {.clay-dataset}
_unnamed [3 2]:

|   :$group-name | :total-layoffs |
|----------------|---------------:|
|  United States |       110170.0 |
|          India |        14227.0 |
| United Kingdom |        10176.0 |


:::


The following chart has a logarithmic scale applied to it so be sure to hover on each bar to have a clear number
of layoffs over the desired country


::: {.sourceClojure}
```clojure
(kind/plotly plotly-layoffs-by-country)
```
:::



```{=html}
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"x":["United States","India","United Kingdom","Germany","Japan","Canada","Israel","Sweden","Kenya","Singapore","China","Cayman Islands","Netherlands","Indonesia","Brazil","Australia","Norway","Ireland","France","Czech Republic","Poland","Estonia","Chile","New Zealand","Nigeria","Ghana","Uruguay","Austria","Denmark","Spain","Finland","Belgium","South Korea","Romania","Lithuania","Hong Kong","Pakistan","Luxembourg","Mexico","Switzerland"],"y":[110170.0,14227.0,10176.0,9363.0,4000.0,2375.0,2373.0,2340.0,1699.0,1445.0,1085.0,1060.0,925.0,790.0,744.0,472.0,465.0,435.0,370.0,316.0,295.0,249.0,200.0,200.0,163.0,150.0,104.0,100.0,79.0,74.0,70.0,50.0,45.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],"type":"bar","marker":{"size":4,"colorscale":"Viridis"}}], {"xaxis":{"title":"Countries","type":"category"},"yaxis":{"title":"People laid off","type":"log"},"title":"Layoffs by country"}, {});</script></div>
```


It makes perfect sense for the chart to look like this as it seems to follow a pattern where
_the larger the tech economy, the harder the layoffs_. However this is just a hypothesis

To formulate an answer to the question we first need to get a hold of an estimated size of the tech sector for each country
There are however, a few pitfalls:

- The "tech" industry may encompass different businesses from country to country
- There is no objective metrics for errors of measure across each entry
- Layoffs can be attributed to a transnational decision. E,g: a company with an HQ in country A may opt for mass layoffs in it's office located in country B. But this study is attributing the layoffs to country B, even though the decision may come from the same company, located elsewhere.


```{=html}
<div style="background-color:grey;height:2px;width:100%;"></div>
```



```{=html}
<div><pre><small><small>source: src/notebooks/layoffs.clj</small></small></pre></div>
```
